{"version":3,"file":"dpr-observer.js","sources":["../src/helper.js","../src/index.js"],"sourcesContent":["export function isFunction(obj) {\n  return obj && typeof obj === 'function'\n}\n\nexport function isString(obj) {\n  return typeof obj === 'string'\n}\n\n/**\n * Provide a function to get current `devicePixelRatio`.\n * `devicePixelRatio` may be modified after browser's zoom\n */\nexport function getDevicePixelRatio() {\n  let dpr = 1\n  // If in browser environment\n  if (typeof window !== 'undefined') {\n    dpr = window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI) || 1\n  }\n  return dpr\n}\n\nexport function supportMatchMedia() {\n  return typeof window !== 'undefined' && isFunction(window.matchMedia)\n}\n\nexport function getIEVersion() {\n  let version = 0\n  const ua = navigator.userAgent\n  if (navigator.appName === 'Microsoft Internet Explorer') {\n    new RegExp('MSIE ([0-9]{1,}[.0-9]{0,})').exec(ua)\n    version = parseFloat(RegExp.$1)\n  }\n  else if (ua.indexOf('Trident') > -1 && ua.indexOf('rv:11.0') > -1) {\n    version = 11\n  }\n  return version\n}\n\nexport const requestAnimationFrame = (\n  typeof window !== 'undefined'\n    && (\n      (window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n      || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n      || window.mozRequestAnimationFrame\n      || window.webkitRequestAnimationFrame\n    )\n) || function (func) {\n  return setTimeout(func, 16)\n}\n\nexport const cancelAnimationFrame = (\n  typeof window !== 'undefined'\n    && (\n      (window.cancelAnimationFrame && window.cancelAnimationFrame.bind(window))\n      || (window.msCancelAnimationFrame && window.msCancelAnimationFrame.bind(window))\n      || window.mozCancelAnimationFrame\n      || window.webkitCancelAnimationFrame\n    )\n) || function (handle) {\n  return clearTimeout(handle)\n}\n\nexport const on = (function() {\n  if (document.addEventListener) {\n    return function(element, event, handler) {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function(element, event, handler) {\n      if (element && event && handler) {\n        element.attachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n\nexport const off = (function() {\n  if (document.removeEventListener) {\n    return function(element, event, handler) {\n      if (element && event) {\n        element.removeEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function(element, event, handler) {\n      if (element && event) {\n        element.detachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n","import { version } from '../package.json'\nimport {\n  isFunction,\n  isString,\n  getDevicePixelRatio,\n  supportMatchMedia,\n  requestAnimationFrame,\n  cancelAnimationFrame,\n  getIEVersion,\n  on,\n  off\n} from './helper'\n\nconst matchMediaSupported = supportMatchMedia()\nconst isIE = !!getIEVersion()\n\nconst TECH_MATCH_MEDIA = 'matchMedia'\nconst TECH_ANIMATION_FRAME = 'animationFrame'\nconst TECH_RESIZE = 'resize'\nconst TECH = [TECH_MATCH_MEDIA, TECH_ANIMATION_FRAME, TECH_RESIZE]\n\nconst defaultOptions = {\n  tech: TECH,\n  preferResize: false,\n  fallback: true\n}\n\n/**\n * An observer for listening to the change of device pixel ratio\n *\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Window/devicePixelRatio\n */\nclass DprObserver {\n\n  static version = version\n\n  static TECH_RESIZE = TECH_RESIZE\n  static TECH_MATCH_MEDIA = TECH_MATCH_MEDIA\n  static TECH_ANIMATION_FRAME = TECH_ANIMATION_FRAME\n\n  constructor(onchange, options) {\n    // check onchange callback function\n    if (!isFunction(onchange)) {\n      throw new Error('the required param `onchange` must be a function!')\n    }\n    this._onchange = onchange\n    // check options\n    options = Object.assign({}, defaultOptions, options || {})\n    let tech = options.tech || TECH\n    if (isString(tech)) {\n     if (TECH.indexOf(tech) === -1) {\n       throw new Error(`Unsupported tech \\`${tech}\\`. Only ${TECH.join(', ')} supported.`)\n     }\n     if (tech.indexOf(',') !== -1) {\n       tech = tech.split(',')\n     }\n    }\n    // if prefer resize tech\n    if (options.preferResize) {\n      if (tech.indexOf(TECH_RESIZE) === -1) {\n        tech.unshift(TECH_RESIZE)\n      }\n      else {\n        tech = TECH_RESIZE.concat(tech.filter(t !== TECH_RESIZE))\n      }\n    }\n    const techLen = tech.length\n    let fallback\n    for (let i = 0, t; i < techLen; i++) {\n      t = tech[i]\n      if (TECH.indexOf(t) !== -1) {\n        if (this._init(t)) {\n          console.log(fallback ? `fallback to the \\`${t}\\` tech.` : `\\`${t}\\` tech is currently used.`)\n          break\n        }\n        if (!options.fallback) {\n          throw new Error(\n            `The tech \\`${t}\\` seems to be not supported. Please enable \\`fallback\\` to try others techs.`\n          )\n        }\n        fallback = true\n        console.warn(`The tech \\`${t}\\` seems to be not supported.`)\n      }\n      else {\n        console.warn(`Unsupported tech \\`${t}\\`.`)\n      }\n    }\n  }\n\n  _init(tech) {\n    switch (tech) {\n      case TECH_RESIZE:\n        this._createResizeListener()\n        break\n      case TECH_MATCH_MEDIA:\n        // don't use matchMedia in IE even if it supports\n        if (!matchMediaSupported || isIE) {\n          return false\n        }\n        this._createMediaMatcher()\n        break\n      case TECH_ANIMATION_FRAME:\n        this._createAnimationListener()\n        break\n    }\n    return true\n  }\n\n  _createResizeListener() {\n    let dpr = getDevicePixelRatio()\n    on(window, 'resize', this._updateListener = e => {\n      const newDpr = getDevicePixelRatio()\n      if (dpr !== newDpr) {\n        this._onchange && this._onchange({\n          tech: TECH_RESIZE,\n          oldDpr: dpr,\n          dpr: dpr = newDpr,\n          event: e\n        })\n      }\n    })\n  }\n\n  // FIXME: seems chrome 49 or older cannot trigger update listener\n  _createMediaMatcher() {\n    let dpr = getDevicePixelRatio()\n    const mqString = `(resolution: ${dpr}dppx)`\n    this._mediaMatcher = window.matchMedia(mqString)\n    this._mediaMatcher.addListener(\n      this._updateListener = e => {\n        const newDpr = getDevicePixelRatio()\n        this._onchange({\n          tech: TECH_MATCH_MEDIA,\n          oldDpr: dpr,\n          dpr: dpr = newDpr,\n          event: e\n        })\n\n        // recreate the media mather with the new dpr\n        this._disposeMediaMatcher()\n        this._createMediaMatcher()\n      }\n    )\n  }\n\n  _createAnimationListener() {\n    let dpr = getDevicePixelRatio()\n    const func = e => {\n      const newDpr = getDevicePixelRatio()\n      if (dpr !== newDpr) {\n        this._onchange && this._onchange({\n          tech: TECH_ANIMATION_FRAME,\n          oldDpr: dpr,\n          dpr: dpr = newDpr,\n          event: {\n            handle: this._updateListener,\n            ts: e\n          }\n        })\n      }\n      requestAnimationFrame(func)\n    }\n    this._updateListener = requestAnimationFrame(func)\n  }\n\n  _disposeResizeListener() {\n    this._updateListener && off(window, 'resize', this._updateListener)\n  }\n\n  _disposeMediaMatcher() {\n    if (this._mediaMatcher) {\n      this._mediaMatcher.removeListener(this._updateListener)\n      this._mediaMatcher = null\n    }\n  }\n\n  _disposeAnimationListener() {\n    this._updateListener && cancelAnimationFrame(this._updateListener)\n  }\n\n  /**\n   * Dispose the observer\n   */\n  dispose() {\n    this._disposeAnimationListener()\n    this._disposeResizeListener()\n    this._disposeMediaMatcher()\n    if (this._updateListener) {\n      this._updateListener = null\n    }\n    this._onchange = null\n  }\n\n  /**\n   * Get current device pixel ratio\n   * @return {Number} Current device pixel ratio\n   */\n  getDpr() {\n    return getDevicePixelRatio()\n  }\n\n  static getDpr() {\n    return getDevicePixelRatio()\n  }\n\n}\n\nexport default DprObserver\n"],"names":["isFunction","obj","isString","getDevicePixelRatio","dpr","window","devicePixelRatio","screen","deviceXDPI","logicalXDPI","supportMatchMedia","matchMedia","getIEVersion","version","ua","navigator","userAgent","appName","RegExp","exec","parseFloat","$1","indexOf","requestAnimationFrame","bind","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","func","setTimeout","cancelAnimationFrame","msCancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","handle","clearTimeout","on","document","addEventListener","element","event","handler","attachEvent","off","removeEventListener","detachEvent","matchMediaSupported","isIE","TECH_MATCH_MEDIA","TECH_ANIMATION_FRAME","TECH_RESIZE","TECH","defaultOptions","tech","preferResize","fallback","DprObserver","onchange","options","Error","_onchange","join","split","unshift","concat","filter","t","techLen","length","i","_init","console","log","warn","_createResizeListener","_createMediaMatcher","_createAnimationListener","_updateListener","e","newDpr","oldDpr","mqString","_mediaMatcher","addListener","_disposeMediaMatcher","ts","_disposeResizeListener","removeListener","_disposeAnimationListener","dispose","getDpr"],"mappings":"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"}