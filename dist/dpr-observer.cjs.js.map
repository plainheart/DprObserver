{"version":3,"file":"dpr-observer.cjs.js","sources":["../src/helper.js","../src/index.js"],"sourcesContent":["export function isFunction(obj) {\n  return obj && typeof obj === 'function'\n}\n\nexport function isString(obj) {\n  return typeof obj === 'string'\n}\n\n/**\n * Provide a function to get current `devicePixelRatio`.\n * `devicePixelRatio` may be modified after browser's zoom\n */\nexport function getDevicePixelRatio() {\n  let dpr = 1\n  // If in browser environment\n  if (typeof window !== 'undefined') {\n    dpr = window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI) || 1\n  }\n  return dpr\n}\n\nexport function supportMatchMedia() {\n  return typeof window !== 'undefined' && isFunction(window.matchMedia)\n}\n\nexport function getIEVersion() {\n  let version = 0\n  const ua = navigator.userAgent\n  if (navigator.appName === 'Microsoft Internet Explorer') {\n    new RegExp('MSIE ([0-9]{1,}[.0-9]{0,})').exec(ua)\n    version = parseFloat(RegExp.$1)\n  }\n  else if (ua.indexOf('Trident') > -1 && ua.indexOf('rv:11.0') > -1) {\n    version = 11\n  }\n  return version\n}\n\nexport const requestAnimationFrame = (\n  typeof window !== 'undefined'\n    && (\n      (window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n      || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n      || window.mozRequestAnimationFrame\n      || window.webkitRequestAnimationFrame\n    )\n) || function (func) {\n  return setTimeout(func, 16)\n}\n\nexport const cancelAnimationFrame = (\n  typeof window !== 'undefined'\n    && (\n      (window.cancelAnimationFrame && window.cancelAnimationFrame.bind(window))\n      || (window.msCancelAnimationFrame && window.msCancelAnimationFrame.bind(window))\n      || window.mozCancelAnimationFrame\n      || window.webkitCancelAnimationFrame\n    )\n) || function (handle) {\n  return clearTimeout(handle)\n}\n\nexport const on = (function() {\n  if (document.addEventListener) {\n    return function(element, event, handler) {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function(element, event, handler) {\n      if (element && event && handler) {\n        element.attachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n\nexport const off = (function() {\n  if (document.removeEventListener) {\n    return function(element, event, handler) {\n      if (element && event) {\n        element.removeEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function(element, event, handler) {\n      if (element && event) {\n        element.detachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n","import { version } from '../package.json'\nimport {\n  isFunction,\n  isString,\n  getDevicePixelRatio,\n  supportMatchMedia,\n  requestAnimationFrame,\n  cancelAnimationFrame,\n  getIEVersion,\n  on,\n  off\n} from './helper'\n\nconst matchMediaSupported = supportMatchMedia()\nconst isIE = !!getIEVersion()\n\nconst TECH_MATCH_MEDIA = 'matchMedia'\nconst TECH_ANIMATION_FRAME = 'animationFrame'\nconst TECH_RESIZE = 'resize'\nconst TECH = [TECH_MATCH_MEDIA, TECH_ANIMATION_FRAME, TECH_RESIZE]\n\nconst defaultOptions = {\n  tech: TECH,\n  preferResize: false,\n  fallback: true\n}\n\n/**\n * An observer for listening to the change of device pixel ratio\n *\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Window/devicePixelRatio\n */\nclass DprObserver {\n\n  static version = version\n\n  static TECH_RESIZE = TECH_RESIZE\n  static TECH_MATCH_MEDIA = TECH_MATCH_MEDIA\n  static TECH_ANIMATION_FRAME = TECH_ANIMATION_FRAME\n\n  constructor(onchange, options) {\n    // check onchange callback function\n    if (!isFunction(onchange)) {\n      throw new Error('the required param `onchange` must be a function!')\n    }\n    this._onchange = onchange\n    // check options\n    options = Object.assign({}, defaultOptions, options || {})\n    let tech = options.tech || TECH\n    if (isString(tech)) {\n     if (!TECH.indexOf(tech) === -1) {\n       throw new Error(`unsupported tech \\`${tech}\\`, only ${TECH.join(', ')} supported.`)\n     }\n     if (tech.indexOf(',') !== -1) {\n       tech = tech.split(',')\n     }\n    }\n    // if prefer resize tech\n    if (options.preferResize) {\n      if (tech.indexOf(TECH_RESIZE) === -1) {\n        tech.unshift(TECH_RESIZE)\n      }\n      else {\n        tech = TECH_RESIZE.concat(tech.filter(t !== TECH_RESIZE))\n      }\n    }\n    const techLen = tech.length\n    let fallback\n    for (let i = 0, t; i < techLen; i++) {\n      t = tech[i]\n      if (TECH.indexOf(t) !== -1) {\n        if (this._init(t)) {\n          console.log(fallback ? `fallback to the \\`${t}\\` tech.` : `\\`${t}\\` tech is currently used.`)\n          break\n        }\n        if (!options.fallback) {\n          throw new Error(\n            `The tech \\`${t}\\` seems to be not supported. Please enable \\`fallback\\` to try others techs.`\n          )\n        }\n        fallback = true\n        console.warn(`The tech \\`${t}\\` seems to be not supported.`)\n      }\n      else {\n        console.warn(`Unsupported tech \\`${t}\\`.`)\n      }\n    }\n  }\n\n  _init(tech) {\n    switch (tech) {\n      case TECH_RESIZE:\n        this._createResizeListener()\n        break\n      case TECH_MATCH_MEDIA:\n        // don't use matchMedia in IE even if it supports\n        if (!matchMediaSupported || isIE) {\n          return false\n        }\n        this._createMediaMatcher()\n        break\n      case TECH_ANIMATION_FRAME:\n        this._createAnimationListener()\n        break\n    }\n    return true\n  }\n\n  _createResizeListener() {\n    let dpr = getDevicePixelRatio()\n    on(window, 'resize', this._updateListener = e => {\n      const newDpr = getDevicePixelRatio()\n      if (dpr !== newDpr) {\n        this._onchange && this._onchange({\n          tech: TECH_RESIZE,\n          oldDpr: dpr,\n          dpr: dpr = newDpr,\n          event: e\n        })\n      }\n    })\n  }\n\n  // FIXME: seems chrome 49 or older cannot trigger update listener\n  _createMediaMatcher() {\n    let dpr = getDevicePixelRatio()\n    const mqString = `(resolution: ${dpr}dppx)`\n    this._mediaMatcher = window.matchMedia(mqString)\n    this._mediaMatcher.addListener(\n      this._updateListener = e => {\n        const newDpr = getDevicePixelRatio()\n        this._onchange({\n          tech: TECH_MATCH_MEDIA,\n          oldDpr: dpr,\n          dpr: dpr = newDpr,\n          event: e\n        })\n\n        // recreate the media mather with the new dpr\n        this._disposeMediaMatcher()\n        this._createMediaMatcher()\n      }\n    )\n  }\n\n  _createAnimationListener() {\n    let dpr = getDevicePixelRatio()\n    const func = e => {\n      const newDpr = getDevicePixelRatio()\n      if (dpr !== newDpr) {\n        this._onchange && this._onchange({\n          tech: TECH_ANIMATION_FRAME,\n          oldDpr: dpr,\n          dpr: dpr = newDpr,\n          event: {\n            handle: this._updateListener,\n            ts: e\n          }\n        })\n      }\n      requestAnimationFrame(func)\n    }\n    this._updateListener = requestAnimationFrame(func)\n  }\n\n  _disposeResizeListener() {\n    this._updateListener && off(window, 'resize', this._updateListener)\n  }\n\n  _disposeMediaMatcher() {\n    if (this._mediaMatcher) {\n      this._mediaMatcher.removeListener(this._updateListener)\n      this._mediaMatcher = null\n    }\n  }\n\n  _disposeAnimationListener() {\n    this._updateListener && cancelAnimationFrame(this._updateListener)\n  }\n\n  /**\n   * Dispose the observer\n   */\n  dispose() {\n    this._disposeAnimationListener()\n    this._disposeResizeListener()\n    this._disposeMediaMatcher()\n    if (this._updateListener) {\n      this._updateListener = null\n    }\n    this._onchange = null\n  }\n\n  /**\n   * Get current device pixel ratio\n   * @return {Number} Current device pixel ratio\n   */\n  getDpr() {\n    return getDevicePixelRatio()\n  }\n\n  static getDpr() {\n    return getDevicePixelRatio()\n  }\n\n}\n\nexport default DprObserver\n"],"names":["isFunction","obj","isString","getDevicePixelRatio","dpr","window","devicePixelRatio","screen","deviceXDPI","logicalXDPI","supportMatchMedia","matchMedia","getIEVersion","version","ua","navigator","userAgent","appName","RegExp","exec","parseFloat","$1","indexOf","requestAnimationFrame","bind","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","func","setTimeout","cancelAnimationFrame","msCancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","handle","clearTimeout","on","document","addEventListener","element","event","handler","attachEvent","off","removeEventListener","detachEvent","matchMediaSupported","isIE","TECH_MATCH_MEDIA","TECH_ANIMATION_FRAME","TECH_RESIZE","TECH","defaultOptions","tech","preferResize","fallback","DprObserver","onchange","options","Error","_onchange","join","split","unshift","concat","filter","t","techLen","length","i","_init","console","log","warn","_createResizeListener","_createMediaMatcher","_createAnimationListener","_updateListener","e","newDpr","oldDpr","mqString","_mediaMatcher","addListener","_disposeMediaMatcher","ts","_disposeResizeListener","removeListener","_disposeAnimationListener","dispose","getDpr"],"mappings":"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"}